<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <!-- FIXED VIEWPORT TAG FOR MOBILE RESPONSIVENESS -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="HandheldFriendly" content="true">
    <meta name="MobileOptimized" content="width">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Everest Public School - Admission Form & Gallery</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        :root {
            --sky: #4A90E2;
            --sky-dark: #3A70B0;
            --navy: #2B4E6B;
        }
        * { margin:0; padding:0; box-sizing:border-box; }
        
        body {
            font-family: 'Segoe UI', sans-serif;
            color: #1e293b;
            line-height: 1.7;
            overflow-x: hidden;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            min-height: 100vh;
            position: relative;
            width: 100%;
        }

        /* School logo as background watermark */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('Gemini_Generated_Image_9ri1669ri1669ri1 (1).png');
            background-repeat: no-repeat;
            background-position: center center;
            background-size: 1000px auto;
            opacity: 0.22;
            pointer-events: none;
            z-index: -1;
        }

        @keyframes fadeIn { 0% { opacity: 0; transform: translateY(20px); } 100% { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { 0% { opacity: 0; transform: translateY(40px); } 100% { opacity: 1; transform: translateY(0); } }
        @keyframes slideUpFast { 0% { opacity: 0; transform: translateY(60px); } 100% { opacity: 1; transform: translateY(0); } }
        @keyframes slideUpButton { 0% { opacity: 0; transform: translateY(80px); } 100% { opacity: 1; transform: translateY(0); } }
        
        /* ================== WELCOME LIGHTBOX STYLES ================== */
        #welcomeLightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.97);
            z-index: 999999;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(10px);
            animation: fadeIn 0.5s ease forwards;
        }

        .welcome-container {
            background: white;
            border-radius: 30px;
            box-shadow: 
                0 0 0 1px rgba(255, 255, 255, 0.8),
                0 40px 100px rgba(74, 144, 226, 0.3),
                0 0 200px rgba(135, 206, 235, 0.4);
            padding: 60px 80px;
            text-align: center;
            max-width: 800px;
            width: 90%;
            position: relative;
            overflow: hidden;
            border: 3px solid #4A90E2;
            animation: premiumLightboxEntry 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards, premiumBorderGlow 4s infinite alternate;
        }

        .welcome-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                transparent 30%,
                rgba(74, 144, 226, 0.1) 50%,
                transparent 70%
            );
            animation: premiumShine 3s infinite linear;
        }

        .welcome-text {
            font-size: 4.5rem;
            font-weight: 900;
            color: transparent;
            background: linear-gradient(45deg, #2B4E6B, #4A90E2, #87CEEB);
            -webkit-background-clip: text;
            background-clip: text;
            margin-bottom: 30px;
            letter-spacing: 2px;
            text-transform: uppercase;
            animation: premiumTextReveal 1.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.5s both;
            position: relative;
            z-index: 2;
            text-shadow: 0 5px 15px rgba(74, 144, 226, 0.3);
        }

        .welcome-subtitle {
            font-size: 1.8rem;
            color: #2B4E6B;
            margin-bottom: 40px;
            opacity: 0;
            animation: fadeIn 1s ease 2s forwards;
            font-weight: 300;
            letter-spacing: 3px;
        }

        .welcome-logo {
            width: 150px;
            height: 150px;
            margin: 0 auto 30px;
            border-radius: 50%;
            border: 5px solid #4A90E2;
            padding: 10px;
            animation: premiumFloat 6s ease-in-out infinite, premiumPulse 4s ease-in-out infinite;
            box-shadow: 0 0 50px rgba(74, 144, 226, 0.5);
        }

        .welcome-close-btn {
            position: absolute;
            top: 25px;
            right: 25px;
            width: 50px;
            height: 50px;
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 10px 30px rgba(231, 76, 60, 0.4);
        }

        .welcome-close-btn:hover {
            animation: premiumXClose 1s ease forwards;
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(231, 76, 60, 0.7);
        }

        .welcome-close-btn:active {
            transform: scale(0.95);
        }

        .welcome-decoration {
            position: absolute;
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, rgba(74, 144, 226, 0.1), rgba(135, 206, 235, 0.1));
            border-radius: 30px;
            z-index: 1;
            animation: premiumFloat 8s ease-in-out infinite alternate;
        }

        .decoration-1 { top: -50px; left: -50px; transform: rotate(45deg); }
        .decoration-2 { bottom: -50px; right: -50px; transform: rotate(-45deg); animation-delay: -2s; }
        .decoration-3 { top: 50%; right: -30px; width: 80px; height: 80px; animation-delay: -1s; }
        .decoration-4 { bottom: 30%; left: -30px; width: 60px; height: 60px; animation-delay: -3s; }

        .welcome-progress {
            width: 100%;
            height: 6px;
            background: rgba(74, 144, 226, 0.1);
            border-radius: 3px;
            margin-top: 40px;
            overflow: hidden;
            opacity: 0;
            animation: fadeIn 1s ease 1.5s forwards;
        }

        .welcome-progress-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #4A90E2, #87CEEB);
            border-radius: 3px;
            animation: loadingProgress 3s ease 2s forwards;
        }

        /* WELCOME LIGHTBOX ANIMATIONS */
        @keyframes premiumLightboxEntry {
            0% { opacity: 0; transform: scale(0.5) rotate(-10deg); filter: blur(20px); }
            30% { opacity: 0.8; transform: scale(1.1) rotate(5deg); filter: blur(5px); }
            60% { opacity: 1; transform: scale(0.95) rotate(-2deg); filter: blur(0); }
            80% { opacity: 1; transform: scale(1.02) rotate(1deg); filter: blur(0); }
            100% { opacity: 1; transform: scale(1) rotate(0); filter: blur(0); }
        }
        @keyframes premiumTextReveal {
            0% { opacity: 0; letter-spacing: 30px; filter: blur(15px); transform: translateY(50px); }
            60% { opacity: 0.8; letter-spacing: 5px; filter: blur(5px); transform: translateY(-10px); }
            80% { opacity: 1; letter-spacing: 2px; filter: blur(0); transform: translateY(5px); }
            100% { opacity: 1; letter-spacing: normal; filter: blur(0); transform: translateY(0); }
        }
        @keyframes premiumPulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 25px rgba(255, 255, 255, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
        }
        @keyframes premiumShine { 0% { background-position: -500px 0; } 100% { background-position: 500px 0; } }
        @keyframes premiumFloat { 0%, 100% { transform: translateY(0) rotate(0); } 50% { transform: translateY(-20px) rotate(5deg); } }
        @keyframes premiumXClose { 0% { transform: rotate(0) scale(1); opacity: 1; } 50% { transform: rotate(180deg) scale(1.2); opacity: 0.7; } 100% { transform: rotate(360deg) scale(1); opacity: 1; } }
        @keyframes premiumBorderGlow { 0%, 100% { border-color: #4A90E2; box-shadow: 0 0 30px rgba(74, 144, 226, 0.5); } 50% { border-color: #87CEEB; box-shadow: 0 0 50px rgba(135, 206, 235, 0.8); } }
        @keyframes loadingProgress { 0% { width: 0%; } 100% { width: 100%; } }

        /* Responsive styles for welcome lightbox */
        @media (max-width: 1200px) {
            .welcome-container { padding: 40px 30px; width: 95%; }
            .welcome-text { font-size: 3rem; }
            .welcome-subtitle { font-size: 1.3rem; }
            .welcome-logo { width: 120px; height: 120px; }
            .welcome-close-btn { top: 15px; right: 15px; width: 40px; height: 40px; font-size: 20px; }
        }
        @media (max-width: 480px) {
            .welcome-text { font-size: 2.2rem; }
            .welcome-subtitle { font-size: 1rem; letter-spacing: 1px; }
            .welcome-container { padding: 30px 20px; }
        }
        /* ================== END WELCOME LIGHTBOX STYLES ================== */
        
        header {
            background: linear-gradient(135deg, var(--navy), var(--sky-dark));
            color: white; text-align: center; padding: 80px 20px;
            box-shadow: 0 20px 60px rgba(43,78,107,0.6);
            animation: fadeIn 1s ease-out;
            width: 100%;
            margin: 0 auto;
        }
        header img {
            width: 150px; height: 150px; border-radius: 50%; border: 10px solid white;
            object-fit: cover; box-shadow: 0 0 60px rgba(255,255,255,0.7);
        }
        header h1 { font-size: 3.5rem; margin: 20px 0; }
        header p { font-size: 1.5rem; }
        
        nav {
            background: white; padding: 20px; text-align: center;
            box-shadow: 0 12px 50px rgba(0,0,0,0.18); position: sticky; top: 0; z-index: 1000;
            display: flex; justify-content: center; align-items: center;
            width: 100%;
            margin: 0 auto;
        }
        nav .nav-links {
            display: flex;
            gap: 20px;
            margin-right: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }
        nav a {
            color: var(--navy); font-weight: 700; font-size: 1.1rem;
            text-decoration: none; transition: all 0.4s ease;
        }
        nav a:hover { color: var(--sky); transform: translateY(-6px); }
        .nav-apply-btn {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: bold;
            text-transform: uppercase;
            box-shadow: 0 10px 30px rgba(231, 76, 60, 0.5);
            transition: all 0.3s ease;
        }
        .nav-apply-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 40px rgba(231, 76, 60, 0.7);
        }
        
        section {
            max-width: 1000px; margin: 80px auto; padding: 50px;
            background: white; border-radius: 30px;
            box-shadow: 0 30px 100px rgba(74,144,226,0.22);
            position: relative;
            overflow: hidden;
            animation: fadeIn 1.2s ease-out;
            z-index: 10;
            width: 95%;
        }
        
        /* ANIMATION CLASSES FOR SCROLL TRIGGER - FASTER */
        .section-hidden {
            opacity: 0;
            transform: translateY(40px);
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .section-visible { opacity: 1; transform: translateY(0); }
        
        #admissionFormWrapper {
            display: none;
            opacity: 0;
            transform: translateY(100px);
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        #admissionFormWrapper.open {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Special animation for admission form apply button */
        .apply-btn-animated {
            animation: slideUpButton 1s cubic-bezier(0.34, 1.56, 0.64, 1) 0.5s both;
        }
        
        .admission-form-container {
            max-width: 700px;
            margin: 30px auto;
            padding: 30px;
            border: 2px solid var(--sky);
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(74, 144, 226, 0.1);
            animation: slideUpFast 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .admission-form h4 {
            font-size: 1.8rem;
            color: var(--navy);
            margin-top: 25px;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 3px solid var(--sky);
            display: inline-block;
            animation: slideUpFast 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s both;
        }
        .form-group {
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
            animation: slideUpFast 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s both;
        }
        .form-group label {
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--navy);
            font-size: 1rem;
        }
        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="tel"],
        .form-group input[type="date"],
        .form-group select,
        .form-group textarea {
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            width: 100%;
        }
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: var(--sky);
            box-shadow: 0 0 8px rgba(74, 144, 226, 0.5);
            outline: none;
            transform: translateY(-2px);
        }
        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        .form-row .form-group { flex: 1; margin-bottom: 0; }
        .radio-group, .checkbox-group {
            margin-top: 8px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        .radio-group label, .checkbox-group label {
            font-weight: 400;
            color: #1e293b;
        }
        .radio-group input[type="radio"], .checkbox-group input[type="checkbox"] { margin-right: 5px; }
        
        .upload-field {
            border: 2px dashed #ccc;
            padding: 15px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            animation: slideUpFast 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.4s both;
        }
        .upload-field:hover {
            border-color: var(--sky);
            background-color: #f0f9ff;
            transform: translateY(-2px);
        }
        .admission-submit-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, var(--sky), var(--sky-dark));
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            box-shadow: 0 15px 40px rgba(74, 144, 226, 0.5);
            transition: all 0.4s ease;
            margin-top: 30px;
            animation: slideUpFast 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.6s both;
        }
        .admission-submit-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(74, 144, 226, 0.7);
        }
        
        .apply-btn {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white; padding: 15px 40px; border: none; border-radius: 50px;
            font-size: 1.5rem; font-weight: bold; cursor: pointer;
            box-shadow: 0 15px 40px rgba(231, 76, 60, 0.6); transition: all 0.4s ease;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }
        .apply-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 20px 50px rgba(231, 76, 60, 0.75);
        }
        
        /* Apply button ripple effect */
        .apply-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }
        .apply-btn:focus:not(:active)::after { animation: ripple 1s ease-out; }
        @keyframes ripple {
            0% { transform: scale(0, 0); opacity: 0.5; }
            100% { transform: scale(50, 50); opacity: 0; }
        }
        
        .close-form-btn {
            background: #aaa;
            color: white; padding: 8px 15px; border: none; border-radius: 8px;
            font-size: 0.9rem; font-weight: bold; cursor: pointer;
            float: right;
            margin-top: -10px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            animation: slideUpFast 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.1s both;
        }
        .close-form-btn:hover { background: #888; transform: translateY(-2px); }
        
        /* NEW ADMISSION SECTION LAYOUT - UPDATED */
        .admission-section-content {
            display: flex;
            gap: 40px;
            align-items: flex-start;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .admission-info-left { flex: 1; padding-right: 15px; min-width: 300px; }
        .admission-image-right { flex: 1; text-align: center; min-width: 300px; }
        .admission-image-right img {
            width: 100%;
            max-width: 400px;
            height: auto;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(74,144,226,0.3);
            border: 6px solid white;
            transition: transform 0.5s ease;
        }
        .admission-image-right img:hover { transform: scale(1.03); }
        
        /* Apply button in admission section */
        .admission-apply-btn-container { text-align: center; margin: 30px 0; }
        
        @media (max-width: 900px) {
            .admission-section-content { flex-direction: column; gap: 30px; }
            .admission-info-left { padding-right: 0; }
            .admission-image-right { order: -1; }
        }
        
        .counter-section {
            max-width: 100%;
            margin: 80px auto;
            padding: 60px 30px;
            background: linear-gradient(135deg, var(--sky-dark), var(--sky));
            color: white;
            text-align: center;
            border-radius: 40px;
            box-shadow: 0 30px 80px rgba(0,0,0,0.3);
            overflow: hidden;
            z-index: 10;
            width: 95%;
        }
        
        h3 {
            color: var(--navy); font-size: 2.5rem; margin-bottom: 40px;
            position: relative; display: inline-block; z-index: 2;
        }
        h3::after {
            content: ''; position: absolute; width: 100px; height: 6px;
            background: linear-gradient(90deg, var(--sky), var(--sky-dark));
            bottom: -15px; left: 0; border-radius: 4px;
        }
        
        .about-content {
            display: flex; gap: 30px; align-items: flex-start; margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .about-text { flex: 3; min-width: 300px; }
        .values-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px;
            margin-top: 40px; text-align: center;
        }
        .value-item i {
            font-size: 3rem; color: var(--sky); margin-bottom: 12px;
            transition: color 0.4s ease;
        }
        .value-item:hover i { color: var(--navy); }
        .value-item strong { display: block; font-size: 1.2rem; color: var(--navy); }
        
        .seq-slider {
            position: relative; height: 500px; border-radius: 30px; overflow: hidden;
            box-shadow: 0 40px 120px rgba(74,144,226,0.45); margin: 50px auto; max-width: 900px;
            z-index: 10;
            width: 100%;
        }
        .seq-slider img {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            object-fit: contain;
            opacity: 0; transition: opacity 2s ease-in-out; border-radius: 30px;
        }
        .seq-slider img.active { opacity: 1; z-index: 2; cursor: zoom-in; }
        .topper-slider img { object-fit: contain; }
        
        .slider-btn {
            position: absolute; top: 50%; transform: translateY(-50%);
            background: rgba(0,0,0,0.7); color: white; width: 60px; height: 60px;
            border-radius: 50%; font-size: 2rem;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; z-index: 30; transition: all 0.4s ease;
            backdrop-filter: blur(10px);
        }
        .slider-btn:hover {
            background: var(--sky); transform: translateY(-50%) scale(1.2);
        }
        .slider-btn.prev { left: 15px; }
        .slider-btn.next { right: 15px; }
        
        .counter-grid {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            flex-wrap: wrap;
            max-width: 1000px;
            margin: 0 auto;
        }
        .counter-item {
            flex: 1;
            min-width: 150px;
            max-width: 220px;
            opacity: 0;
            transform: translateY(40px);
            transition: all 0.6s ease-out;
        }
        .counter-item.visible { opacity: 1; transform: translateY(0); }
        .counter-item h4 {
            font-size: 4rem;
            font-weight: 900;
            margin: 0;
            line-height: 1;
            text-shadow: 0 8px 20px rgba(0,0,0,0.5);
        }
        .counter-item p {
            font-size: 1.2rem;
            margin-top: 12px;
            font-weight: 700;
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }
        
        .event-search-container { margin-bottom: 30px; }
        #eventSearch {
            width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px;
            font-size: 1rem; transition: border-color 0.3s;
        }
        #eventSearch:focus { border-color: var(--sky); outline: none; }
        
        .event-card-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;
        }
        .event-item {
            display: flex; background: #f8faff; border-radius: 15px; padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08); transition: transform 0.4s ease;
            align-items: center;
        }
        .event-item:hover { transform: translateY(-8px); }
        .event-date {
            background: var(--sky); color: white; padding: 12px; border-radius: 12px;
            text-align: center; min-width: 80px; font-weight: 600; margin-right: 15px;
        }
        .event-date span { display: block; font-size: 2.5rem; font-weight: 900; line-height: 1; }
        
        .staff-grid {
            display: flex; justify-content: space-around; gap: 20px; flex-wrap: wrap; margin: 40px 0;
        }
        .staff-card {
            background: #ffffff; border-radius: 15px; padding: 25px; text-align: center;
            max-width: 300px; box-shadow: 0 15px 45px rgba(0,0,0,0.1); transition: all 0.5s ease; flex-grow: 1;
        }
        .staff-card:hover { transform: scale(1.05) translateY(-5px); }
        .staff-card img {
            width: 150px; height: 150px; object-fit: cover; border-radius: 50%;
            border: 6px solid var(--sky); margin-bottom: 15px;
        }
        
        .gallery-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
            gap: 12px;
            flex-wrap: wrap;
            padding: 10px 0;
            border-bottom: 2px solid #eee;
        }
        .gallery-tab {
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f0f9ff;
            color: var(--navy);
            border: 2px solid transparent;
        }
        .gallery-tab:hover {
            background: #e0f2fe;
            color: var(--sky-dark);
        }
        .gallery-tab.active {
            background: linear-gradient(45deg, var(--sky), var(--sky-dark));
            color: white;
            border: 2px solid white;
            box-shadow: 0 5px 15px rgba(74,144,226,0.5);
        }
        
        #galleryGrid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 25px 0;
            transition: opacity 0.5s ease;
        }
        @media (max-width: 900px) { #galleryGrid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 500px) { #galleryGrid { grid-template-columns: 1fr; } }
        
        .gallery-item {
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            cursor: pointer;
            opacity: 0;
            transform: scale(0.9);
            animation: galleryItemLoad 0.5s ease-out forwards;
            animation-delay: calc(var(--i) * 0.05s);
        }
        .gallery-item.hidden { display: none !important; animation: none !important; }
        @keyframes galleryItemLoad { 100% { opacity: 1; transform: scale(1); } }
        .gallery-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
            transition: transform 0.4s ease;
        }
        .gallery-item:hover img { transform: scale(1.1); }
        
        .gallery-btn {
            display: block;
            padding: 15px 35px;
            font-size: 1.1rem;
            color: white; border: none; border-radius: 50px;
            font-weight: bold; cursor: pointer;
            box-shadow: 0 10px 30px rgba(74,144,226,0.6); transition: all 0.4s ease;
            margin: 25px auto;
            min-width: 220px;
        }
        .gallery-btn.view-more { background: linear-gradient(45deg, var(--sky), var(--sky-dark)); }
        .gallery-btn.view-less { background: linear-gradient(45deg, #e74c3c, #c0392b); box-shadow: 0 10px 30px rgba(231, 76, 60, 0.6); }
        .gallery-btn:hover { 
            transform: translateY(-3px) scale(1.05); 
            box-shadow: 0 15px 40px rgba(74,144,226,0.8); 
        }
        .gallery-btn.view-less:hover { box-shadow: 0 15px 40px rgba(231, 76, 60, 0.8); }
        
        #scrollTopBtn {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background: var(--sky);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            display: none;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(74,144,226,0.5);
            cursor: pointer;
            z-index: 9999;
            transition: all 0.3s ease;
        }
        #scrollTopBtn:hover { background: var(--sky-dark); transform: scale(1.1); }
        
        #footer {
            background-color: var(--navy);
            color: white; padding: 50px 20px 20px;
            font-size: 1rem;
            z-index: 10;
            position: relative;
            width: 100%;
            margin: 0 auto;
        }
        .footer-logo-container { margin-top: 20px; display: flex; align-items: center; gap: 15px; flex-wrap: wrap; }
        .footer-logo-container img { width: 60px; height: 60px; border-radius: 50%; border: 3px solid white; object-fit: cover; }
        
        .footer-grid { max-width: 1100px; margin: 0 auto; display: grid; grid-template-columns: repeat(4, 1fr); gap: 30px; padding-bottom: 30px; }
        @media (max-width: 900px) { .footer-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 500px) { .footer-grid { grid-template-columns: 1fr; } }
        
        .footer-grid h4 { font-size: 1.4rem; margin-bottom: 20px; color: var(--sky); }
        .footer-grid ul { list-style: none; }
        .footer-grid ul li a, .footer-grid p, .footer-grid div { color: #e0f2fe; text-decoration: none; margin-bottom: 10px; display: block; transition: color 0.3s; }
        .footer-grid ul li a:hover { color: white; text-decoration: underline; }
        
        .social-group { margin-top: 15px; }
        .social-icons-side {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        .social-icons-side a {
            font-size: 1.8rem;
            color: #e0f2fe;
            transition: transform 0.3s ease, color 0.3s ease;
        }
        .social-icons-side a:hover { transform: scale(1.2); }
        .social-icons-side .fa-whatsapp:hover { color: #25D366; }
        .social-icons-side .fa-facebook:hover { color: #1877F2; }
        .social-icons-side .fa-tiktok:hover { color: #EE1D52; }
        .social-icons-side .fa-youtube:hover { color: #FF0000; }
        .social-icons-side .fa-instagram:hover {
            background: -webkit-linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .footer-bottom { text-align: center; border-top: 1px solid #3c5d7c; padding-top: 15px; font-size: 0.8rem; }
        .footer-bottom a { color: var(--sky); margin: 0 12px; text-decoration: none; }
        .footer-bottom a:hover { color: white; text-decoration: underline; }
        
        /* FIXED LIGHTBOX STYLES */
        #lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }
        .lightbox-content {
            position: relative;
            max-width: 90%;
            max-height: 90vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #lightbox-img {
            max-width: 100%;
            max-height: 90vh;
            border-radius: 10px;
            box-shadow: 0 0 40px rgba(255, 255, 255, 0.1);
            animation: zoomIn 0.3s ease;
        }
        @keyframes zoomIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .close-lightbox {
            position: absolute;
            top: 20px;
            right: 30px;
            color: white;
            font-size: 35px;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.5);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10001;
        }
        .close-lightbox:hover { background: rgba(231, 76, 60, 0.8); transform: scale(1.1); }
        .lightbox-nav {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 15px;
            transform: translateY(-50%);
            z-index: 10001;
        }
        .lightbox-nav-btn {
            background: rgba(0, 0, 0, 0.5);
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }
        .lightbox-nav-btn:hover { background: rgba(74, 144, 226, 0.8); transform: scale(1.1); }
        .lightbox-counter {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            background: rgba(0, 0, 0, 0.5);
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 13px;
        }
        
        /* Data Visualization Styles */
        .data-visualization {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin: 40px auto;
            max-width: 800px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            width: 95%;
        }
        .chart-container { height: 350px; margin: 25px 0; position: relative; }
        .chart-controls {
            display: flex;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 25px;
        }
        .chart-btn {
            padding: 8px 20px;
            background: #f0f9ff;
            border: 2px solid var(--sky);
            border-radius: 50px;
            color: var(--navy);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8rem;
        }
        .chart-btn.active { background: var(--sky); color: white; }
        .chart-btn:hover:not(.active) { background: #e0f2fe; transform: translateY(-3px); }
        .chart-info { text-align: center; margin-top: 15px; color: #666; font-size: 0.8rem; }
        
        .nepali-to-english {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 12px;
            font-size: 0.8rem;
            color: var(--navy);
            flex-wrap: wrap;
        }
        .nepali-year { background: #f0f9ff; padding: 5px 12px; border-radius: 20px; font-weight: 600; }
        .conversion-arrow { color: var(--sky); font-size: 1rem; }
        .english-year { background: #e0f2fe; padding: 5px 12px; border-radius: 20px; font-weight: 600; }
        
        /* ================== TRANSLATOR FEATURES ================== */
        /* Floating Translator Button - NOW ON LEFT SIDE */
        #translatorBtn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--sky), var(--sky-dark));
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(43, 78, 107, 0.5);
            z-index: 9998;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        #translatorBtn:hover { transform: rotate(15deg) scale(1.1); box-shadow: 0 12px 35px rgba(43, 78, 107, 0.7); }
        #translatorBtn:active { transform: rotate(0deg) scale(0.95); }
        
        /* Language Selector Popup - ADJUSTED FOR LEFT SIDE */
        #languagePopup {
            position: fixed;
            bottom: 85px;
            left: 20px;
            width: 280px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            z-index: 9999;
            padding: 20px;
            display: none;
            transform: translateY(20px) scale(0.95);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        #languagePopup.show { display: block; transform: translateY(0) scale(1); opacity: 1; }
        
        .popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f0f9ff;
        }
        .popup-header h4 { color: var(--navy); margin: 0; font-size: 1.2rem; }
        .close-popup {
            background: none;
            border: none;
            color: #888;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
            transition: color 0.3s;
        }
        .close-popup:hover { color: var(--sky); }
        
        .language-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }
        .language-option {
            display: flex;
            align-items: center;
            padding: 12px;
            border: 2px solid #e0f2fe;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8fbff;
        }
        .language-option:hover { border-color: var(--sky); background: #e0f2fe; transform: translateX(5px); }
        .language-option.selected { border-color: var(--sky); background: #e0f2fe; box-shadow: 0 5px 15px rgba(74, 144, 226, 0.2); }
        .language-flag { font-size: 24px; margin-right: 12px; min-width: 35px; }
        .language-info { flex: 1; }
        .language-name { font-weight: 600; color: var(--navy); font-size: 1rem; }
        .language-native { font-size: 0.8rem; color: #666; margin-top: 3px; }
        .language-check { color: var(--sky); font-size: 18px; opacity: 0; transition: opacity 0.3s; }
        .language-option.selected .language-check { opacity: 1; }
        
        .translate-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, var(--sky), var(--sky-dark));
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 0 8px 25px rgba(74, 144, 226, 0.4);
        }
        .translate-btn:hover { transform: translateY(-3px); box-shadow: 0 12px 30px rgba(74, 144, 226, 0.6); }
        .translate-btn:active { transform: translateY(0); }
        
        /* Success Notification */
        #translationNotification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(76, 175, 80, 0.3);
            z-index: 10001;
            display: none;
            align-items: center;
            gap: 12px;
            transform: translateX(100px);
            opacity: 0;
            animation: slideInRight 0.5s ease forwards;
            max-width: 300px;
        }
        @keyframes slideInRight { to { transform: translateX(0); opacity: 1; } }
        .notification-icon { font-size: 20px; }
        .notification-content h5 { margin: 0 0 5px 0; font-size: 1rem; }
        .notification-content p { margin: 0; font-size: 0.8rem; opacity: 0.9; }
        .close-notification { background: none; border: none; color: white; font-size: 18px; cursor: pointer; margin-left: auto; padding: 5px; }
        
        /* Current Language Display - MOVED TO RIGHT SIDE */
        #currentLanguage {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 8px 15px;
            border-radius: 50px;
            font-size: 0.8rem;
            color: var(--navy);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            z-index: 9997;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 2px solid #e0f2fe;
            backdrop-filter: blur(10px);
        }
        #currentLanguage strong { color: var(--sky); font-weight: 600; }
        
        /* Keyboard Shortcut Hint */
        .keyboard-shortcut {
            font-size: 0.7rem;
            color: #888;
            text-align: center;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #eee;
        }
        .shortcut-key {
            display: inline-block;
            background: #f0f9ff;
            padding: 3px 6px;
            border-radius: 4px;
            font-family: monospace;
            font-weight: bold;
            color: var(--navy);
            border: 1px solid #d0e7ff;
        }
        
        /* Responsive design for translator */
        @media (max-width: 768px) {
            #languagePopup { width: 250px; left: 15px; bottom: 80px; }
            #currentLanguage { bottom: 15px; right: 15px; padding: 6px 12px; font-size: 0.7rem; }
            #translatorBtn { bottom: 15px; left: 15px; width: 45px; height: 45px; font-size: 20px; }
            #translationNotification { top: 15px; right: 15px; left: 15px; max-width: none; }
        }
        @media (max-width: 480px) {
            #languagePopup { width: 220px; left: 10px; bottom: 70px; padding: 15px; }
            .language-option { padding: 10px; }
        }
        
        /* ADMIN LINK */
        .admin-link {
            position: fixed;
            bottom: 20px;
            right: 85px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 8px 15px;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            box-shadow: 0 8px 25px rgba(238, 90, 36, 0.4);
            z-index: 9997;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        .admin-link:hover {
            transform: translateY(-3px);
            color: white;
            box-shadow: 0 12px 30px rgba(238, 90, 36, 0.6);
        }
        
        /* Desktop mode notice for mobile users */
        .desktop-notice {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: var(--navy);
            color: white;
            padding: 10px;
            text-align: center;
            z-index: 100000;
            font-size: 14px;
            font-weight: bold;
        }
        
        /* IMPORTANT: RESPONSIVE FIXES FOR MOBILE */
        @media (max-width: 1200px) {
            header h1 { font-size: 2.5rem; }
            header p { font-size: 1.2rem; }
            header img { width: 120px; height: 120px; border-width: 8px; }
            section { padding: 30px 20px; margin: 40px auto; }
            h3 { font-size: 2rem; }
            .seq-slider { height: 400px; }
            .welcome-text { font-size: 3rem; }
        }
        
        @media (max-width: 768px) {
            body { overflow-x: hidden; }
            header { padding: 40px 15px; }
            header h1 { font-size: 2rem; }
            header img { width: 100px; height: 100px; border-width: 5px; }
            nav { padding: 15px; flex-direction: column; gap: 15px; }
            nav .nav-links { margin-right: 0; gap: 10px; }
            .seq-slider { height: 300px; }
            section { padding: 25px 15px; margin: 30px auto; }
            h3 { font-size: 1.8rem; }
            .counter-item h4 { font-size: 3rem; }
            .counter-item p { font-size: 1rem; }
            .admission-section-content { gap: 20px; }
            .gallery-btn { padding: 12px 25px; font-size: 1rem; }
        }
        
        @media (max-width: 480px) {
            header h1 { font-size: 1.8rem; }
            header p { font-size: 1rem; }
            .seq-slider { height: 250px; }
            section { padding: 20px 10px; margin: 20px auto; }
            h3 { font-size: 1.5rem; }
            .counter-grid { gap: 15px; }
            .counter-item { min-width: 120px; }
            .counter-item h4 { font-size: 2.5rem; }
            .gallery-tabs { gap: 8px; }
            .gallery-tab { padding: 6px 12px; font-size: 0.9rem; }
            .apply-btn { padding: 12px 30px; font-size: 1.2rem; }
        }
        
        /* Remove unnecessary container */
        .mobile-scale-container {
            width: 100%;
            overflow-x: hidden;
        }
    </style>
</head>
<body>
    <!-- DESKTOP MODE NOTICE FOR MOBILE USERS -->
    <div class="desktop-notice" id="desktopNotice">
        <i class="fas fa-desktop"></i> Website optimized for all devices
        <button onclick="document.getElementById('desktopNotice').style.display='none'" 
                style="background:none; border:none; color:white; margin-left:20px; cursor:pointer;">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <!-- PREMIUM WELCOME LIGHTBOX -->
    <div id="welcomeLightbox">
        <div class="welcome-decoration decoration-1"></div>
        <div class="welcome-decoration decoration-2"></div>
        <div class="welcome-decoration decoration-3"></div>
        <div class="welcome-decoration decoration-4"></div>
        
        <button class="welcome-close-btn" id="closeWelcomeBtn" title="Close welcome lightbox">
            <i class="fas fa-times"></i>
        </button>
        
        <div class="welcome-container">
            <img src="Gemini_Generated_Image_9ri1669ri1669ri1 (1).png" alt="School Logo" class="welcome-logo">
            <h1 class="welcome-text">Welcome to our website</h1>
            <p class="welcome-subtitle">Everest Public School - Bardibas-1, Mahottari</p>
            <div class="welcome-progress">
                <div class="welcome-progress-bar"></div>
            </div>
        </div>
    </div>

<div class="mobile-scale-container">
<header>
    <img src="Gemini_Generated_Image_9ri1669ri1669ri1 (1).png" alt="School Logo">
    <h1>Everest Public School</h1>
    <p> Bardibas-1, Mahottari</p>
</header>
<nav>
    <div class="nav-links">
        <a href="#">Home</a>
        <a href="#admissions">Admissions</a>
        <a href="#about">About Us</a>
        <a href="#events">Events</a>
        <a href="#leadership">Leadership</a>
        <a href="#gallery">Gallery</a>
        <a href="#toppers">Toppers</a>
    </div>
    <a href="#admissions" class="nav-apply-btn">APPLY NOW</a>
</nav>

<div class="seq-slider main-slider">
    <img src="1766673016637.jpg" class="active img-open" alt="Event 1">
    <img src="453e401f-59d5-4f5a-8abd-1c44b3f237b5.jpg" class="img-open" alt="Event 2">
    <img src="1766672789024.jpg" class="img-open" alt="Event 3">
    <img src="1766673016637.jpg" class="img-open" alt="Event 4">
    <button class="slider-btn prev"><i class="fas fa-chevron-left"></i></button>
    <button class="slider-btn next"><i class="fas fa-chevron-right"></i></button>
</div>

<!-- ABOUT SECTION WITH ANIMATION -->
<section id="about" class="section-hidden">
    <h3>About Everest Public School</h3>
    <div class="about-content">
        <div class="about-text">
            <p>....................................Everest Public School is a reputed educational institution located in Bardibas-1, Mahottari. Established in 2051 B.S. (1994 A.D.), the school has been providing quality education with dedication and commitment for more than three decades. Since its foundation, Everest Public School has aimed to create a strong academic base while nurturing moral values, discipline, and confidence among students.</p>
            <p>The school follows a student-centered approach to learning, focusing on academic excellence as well as overall personality development. With the support of qualified and experienced teachers, the institution uses modern teaching methods to make learning effective, interactive, and meaningful. Equal importance is given to classroom learning, practical activities, sports, and cultural programs to ensure holistic development.</p>
            <p>Everest Public School believes that education is the key to building a responsible and progressive society. The school maintains a safe, disciplined, and friendly learning environment where students are encouraged to explore their abilities and reach their full potential. Character building, leadership skills, and respect for social values are core principles of the institution.</p>
            <h4>Mission</h4>
            <p style="font-style: italic; font-weight: bold; color: var(--navy);">"Our mission is to provide quality education that develops academic excellence and strong moral values.
We aim to create a safe, disciplined, and student-friendly learning environment.
The school is committed to nurturing critical thinking, creativity, and confidence in every learner.
We strive to encourage honesty, responsibility, and respect for others.
Our mission includes preparing students for future challenges through modern and practical education.
We work to build leadership skills and a sense of social responsibility among students.
Everest Public School is dedicated to shaping capable, confident, and responsible citizens."</p>
        </div>
    </div>
    <div class="values-grid">
        <div class="value-item"><i class="fas fa-lightbulb"></i><strong>Innovation</strong><p>Fostering creative and critical thinking.</p></div>
        <div class="value-item"><i class="fas fa-users"></i><strong>Community</strong><p>Cultivating respect and team spirit.</p></div>
        <div class="value-item"><i class="fas fa-handshake"></i><strong>Integrity</strong><p>Upholding honesty and ethical conduct.</p></div>
        <div class="value-item"><i class="fas fa-graduation-cap"></i><strong>Excellence</strong><p>Striving for the highest academic standards.</p></div>
    </div>
</section>

<!-- COUNTER SECTION WITH ANIMATION -->
<section class="counter-section section-hidden">
    <div class="counter-grid">
        <div class="counter-item"><h4 data-target="900">0+</h4><p>Students</p></div>
        <div class="counter-item"><h4 data-target="35">0+</h4><p>Teachers</p></div>
        <div class="counter-item"><h4 data-target="98">0%</h4><p>Success Rate</p></div>
        <div class="counter-item"><h4 data-target="32">0+</h4><p>Years of Excellence</p></div>
    </div>
</section>

<!-- EVENTS SECTION - DYNAMICALLY LOADED FROM FIREBASE -->
<section id="events">
    <h3>Academic & Event Calendar</h3>
    <div class="event-search-container">
        <input type="text" id="eventSearch" onkeyup="filterEvents()" placeholder="Search events...">
    </div>
    <div class="event-card-grid" id="eventCardGrid">
        <div class="text-center py-5">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading events...</span>
            </div>
            <p class="mt-2">Loading events...</p>
        </div>
    </div>
</section>

<!-- LEADERSHIP SECTION WITH ANIMATION -->
<section id="leadership" class="section-hidden">
    <h3>Leadership Team</h3>
    <div class="staff-grid">
        <div class="staff-card"><img class="img-open" src="principal_image.jpg" alt="Principal"><h4>TBM Mager</h4><p>Principal</p><p>Our school is a vibrant community where curiosity is sparked and lifelong friendships are built. We invite you to join us and experience an environment dedicated to excellence, growth, and shared success.</p></div>
        <div class="staff-card"><img class="img-open" src="493537597_3602052340098786_781301989243123604_n.jpg" alt="Chairman"><h4>Arun Karki</h4><p>Chairman</p><p>Our school is a vibrant community where curiosity is sparked and lifelong friendships are built. We invite you to join us and experience an environment dedicated to excellence, growth, and shared success.</p></div>
    </div>
</section>

<!-- GALLERY SECTION WITH PAGINATION -->
<section id="gallery">
    <h3>School Gallery</h3>
    
    <div class="gallery-tabs">
        <div class="gallery-tab active" data-filter="all">All Photos</div>
        <div class="gallery-tab" data-filter="tour">Tour</div>
        <div class="gallery-tab" data-filter="extracurricular">Extra-Curricular Activities</div>
        <div class="gallery-tab" data-filter="picnic">Picnic</div>
        <div class="gallery-tab" data-filter="sports">Sports</div>
        <div class="gallery-tab" data-filter="culture">Cultural Events</div>
    </div>
    <div id="galleryGrid"></div>
    
    <!-- View More/Less Button -->
    <center>
        <button class="gallery-btn view-more" id="loadMoreBtn">View More Images</button>
    </center>
</section>

<!-- TOPPERS SECTION WITH ANIMATION -->
<section class="toppers-section section-hidden" id="toppers">
    <h3>District Toppers</h3>
    <p>....................................Everest Public School has a proud history of producing District Toppers, including outstanding achievement in 2081 B.S.
The school's students have consistently secured top positions through hard work, discipline, and academic excellence.
Qualified teachers, regular assessments, and focused exam preparation play a key role in these successes.
District toppers from Everest Public School have set inspiring examples for junior students.
The institution emphasizes conceptual learning, practice, and individual guidance for high achievers.
Success in 2081 and previous years reflects the school's strong academic culture.
Everest Public School continues to strive for excellence by nurturing future district toppers every year.</p>
    <div class="seq-slider topper-slider">
        <img class="img-open active" src="1766672789024.jpg" alt="Topper 1">
        <img class="img-open" src="1766673016637.jpg" alt="Topper 2">
        <img class="img-open" src="1766672789024.jpg" alt="Topper 3">
        <button class="slider-btn prev"><i class="fas fa-chevron-left"></i></button>
        <button class="slider-btn next"><i class="fas fa-chevron-right"></i></button>
    </div>
</section>

<!-- STUDENT PERFORMANCE ANALYTICS CHART -->
<section class="data-visualization section-hidden">
    <h3>Student Performance Analytics (1994-2026)</h3>
    <div class="chart-info">
        <p>Showing school performance data from Nepali year 2051 to 2082 (English year 1994-1995 to 2025-2026)</p>
        <div class="nepali-to-english">
            <span class="nepali-year">Nepali: 2051-2082</span>
            <span class="conversion-arrow"></span>
            <span class="english-year">English: 1994-2026</span>
        </div>
    </div>
    <div class="chart-container">
        <canvas id="performanceChart"></canvas>
    </div>
    <div class="chart-controls">
        <button class="chart-btn active" data-chart="bar">Bar Chart</button>
        <button class="chart-btn" data-chart="line">Line Chart</button>
        <button class="chart-btn" data-chart="radar">Radar Chart</button>
        <button class="chart-btn" data-chart="pie">Pie Chart</button>
    </div>
</section>

<!-- ADMISSIONS SECTION -->
<section id="admissions">
    <h3>Admissions Open 2025</h3>
    <div class="admission-section-content">
        <div class="admission-info-left">
            <h4>Welcome to Everest Public School Admissions</h4>
            <p>We are delighted that you are considering Everest Public School for your child's education. Our admissions process is designed to be straightforward and transparent, ensuring that every family has the opportunity to join our vibrant learning community.</p>
            
            <p><strong>Why Choose Everest Public School?</strong></p>
            <ul>
                <li> Over 30 years of academic excellence</li>
                <li> Experienced and dedicated faculty</li>
                <li> State-of-the-art facilities and infrastructure</li>
                <li> Holistic development approach</li>
                <li> Proven track record of district toppers</li>
                <li> Safe and nurturing environment</li>
                <li> Extracurricular and sports programs</li>
            </ul>
            
            <p><strong>Admission Process:</strong></p>
            <ol>
                <li>Fill out the online inquiry form</li>
                <li>Schedule a school visit (optional)</li>
                <li>Submit required documents</li>
                <li>Complete the admission formalities</li>
                <li>Welcome to the Everest family!</li>
            </ol>
            
            <p><strong>Age Criteria:</strong></p>
            <ul>
                <li>Nursery: 3+ years</li>
                <li>LKG: 4+ years</li>
                <li>UKG: 5+ years</li>
                <li>Class 1: 6+ years</li>
            </ul>
            
            <p>For more information, please contact our admission office at <strong>+977 9824863245</strong> or email us at <strong>info@everest.edu</strong></p>
            
            <div class="admission-apply-btn-container">
                <button class="apply-btn apply-btn-animated" id="openAdmissionFormBtn">Apply Now</button>
            </div>
        </div>
        
        <div class="admission-image-right">
            <img src="453e401f-59d5-4f5a-8abd-1c44b3f237b5.jpg" alt="Admission Open - Everest Public School">
            <p style="margin-top: 20px; font-style: italic; color: var(--navy);">Join our community of learners and achievers!</p>
        </div>
    </div>

    <div id="admissionFormWrapper">
        <div class="inquiry-form-container shadow-lg bg-white p-4 rounded border" style="max-width: 600px; margin: 20px auto; position: relative;">
            <button type="button" class="close-form-btn" onclick="toggleAdmissionForm()" style="position: absolute; top: 10px; right: 10px; border: none; background: none; color: #ff4444; font-weight: bold;">
                <i class="fas fa-times"></i> Close
            </button>

            <div class="text-center mb-4">
                <h2 class="fw-bold" style="color: var(--navy);">Admission Inquiry</h2>
                <p class="text-muted">Please provide the details below</p>
            </div>

            <form id="enrollmentForm">
                <div class="row">
                    <div class="col-md-12 mb-3">
                        <label class="form-label fw-bold">Student Full Name *</label>
                        <input type="text" id="studentName" class="form-control" placeholder="Enter student's name" required>
                    </div>

                    <div class="col-md-12 mb-3">
                        <label class="form-label fw-bold">Student Photo (Optional)</label>
                        <div class="upload-field" style="border: 2px dashed #3498db; padding: 20px; text-align: center; border-radius: 10px; background: #f8fbff; cursor: pointer;" onclick="document.getElementById('studentPhoto').click()">
                            <i class="fas fa-camera mb-2" style="font-size: 2rem; color: #3498db;"></i>
                            <p id="fileNameDisplay" class="mb-0 text-muted">Click to select student photo</p>
                            <input type="file" id="studentPhoto" hidden accept="image/*" onchange="updateFileName(this)">
                        </div>
                    </div>

                    <div class="col-md-12 mb-3">
                        <label class="form-label fw-bold d-block">Student Gender *</label>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender" id="m" value="Male" checked>
                            <label class="form-check-label" for="m">Male</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender" id="f" value="Female">
                            <label class="form-check-label" for="f">Female</label>
                        </div>
                    </div>

                    <div class="col-md-12 mb-3">
                        <label class="form-label fw-bold">Parent/Guardian Name *</label>
                        <input type="text" id="parentName" class="form-control" placeholder="Enter parent name" required>
                    </div>

                    <div class="col-md-12 mb-3">
                        <label class="form-label fw-bold">Email Address *</label>
                        <input type="email" id="parentEmail" class="form-control" placeholder="example@mail.com" required>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-bold">Phone Number *</label>
                        <input type="tel" id="phone" class="form-control" placeholder="+977-XXXXXXXXXX" required>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label class="form-label fw-bold">Applying for Class *</label>
                        <select id="studentClass" class="form-select" required>
                            <option value="" selected disabled>Select Class</option>
                            <option>Nursery</option><option>LKG</option><option>UKG</option>
                            <option>Class 1</option><option>Class 2</option><option>Class 3</option>
                            <option>Class 4</option><option>Class 5</option><option>Class 6</option>
                            <option>Class 7</option><option>Class 8</option><option>Class 9</option>
                            <option>Class 10</option>
                        </select>
                    </div>

                    <div class="col-12 mb-4">
                        <label class="form-label fw-bold">Additional Message</label>
                        <textarea id="message" class="form-control" rows="3" placeholder="Any questions for us?"></textarea>
                    </div>

                    <div class="col-12">
                        <button type="submit" id="submitBtn" class="btn btn-primary w-100 py-3 fw-bold mb-3 shadow-sm" style="background: #3498db; border:none; font-size: 1.2rem;">
                            SUBMIT INQUIRY
                        </button>
                    </div>

                    <div class="col-12">
                        <a href="https://wa.me/9779812345678" target="_blank" class="btn btn-success w-100 py-3 fw-bold d-flex align-items-center justify-content-center shadow-sm" style="font-size: 1.2rem; background-color: #25D366; border: none;">
                            <i class="fab fa-whatsapp me-2 fs-3"></i> INQUIRY VIA WHATSAPP
                        </a>
                    </div>
                </div>
            </form>
            <div id="responseMessage" class="mt-4 text-center d-none p-3 rounded shadow-sm"></div>
        </div>
    </div>
</section>

<!-- FOOTER SECTION -->
<footer id="footer">
    <div class="footer-grid">
        <div>
            <h4>Quick Links</h4>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#admissions">Admissions</a></li>
                <li><a href="#about">About Us</a></li>
                <li><a href="#events">Events</a></li>
                <li><a href="#leadership">Leadership</a></li>
                <li><a href="#gallery">Gallery</a></li>
                <li><a href="#toppers">Toppers</a></li>
            </ul>
        </div>
        
        <div>
            <h4>Everest Public School</h4>
            <p>Bardibas-1, Mahottari, Nepal</p>
            <p>Established in 1993</p>
            <p>Quality Education for All</p>
            <div class="social-group">
                <p>Connect with us:</p>
                <div class="social-icons-side">
                    <a href="https://wa.me/9779824863245" target="_blank" title="School WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    <a href="https://www.tiktok.com/@everestpublicscho" target="_blank" title="School TikTok"><i class="fab fa-tiktok"></i></a>
                    <a href="https://www.facebook.com/everestpublic.school.bardibas.mahottari" target="_blank" title="School Facebook"><i class="fab fa-facebook"></i></a>
                    <a href="https://www.youtube.com" target="_blank" title="School YouTube"><i class="fab fa-youtube"></i></a>
                    <a href="https://www.instagram.com" target="_blank" title="School Instagram"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
        
        <div>
            <h4>Contact Info</h4>
            <p><i class="fas fa-map-marker-alt" style="color: var(--sky);"></i> Bardibas-1, Mahottari, Nepal</p>
            <p><i class="fas fa-phone-alt" style="color: var(--sky);"></i> Phone: +977 123 456789</p>
            <p><i class="fas fa-phone-alt" style="color: var(--sky);"></i> Mobile: +977 9824863245</p>
            <p><i class="fas fa-envelope" style="color: var(--sky);"></i> Email: info@everest.edu</p>
            <p><i class="fas fa-clock" style="color: var(--sky);"></i> Office Hours: 9:00 AM - 4:00 PM</p>
            
            <div class="footer-logo-container">
                <img src="Gemini_Generated_Image_9ri1669ri1669ri1 (1).png" alt="School Logo Footer">
                <p style="margin: 0; color: white; font-weight: bold;">Everest Public School</p>
            </div>
        </div>

        <div>
            <h4>Find Us on Map</h4>
            <div class="map-container">
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3568.123!2d85.8942!3d26.9907!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x39ec730c26f36c9f%3A0xc3d2f9a403167469!2sEverest%20Public%20School!5e0!3m2!1sen!2snp!4v1715000000000!5m2!1sen!2snp" 
                    width="100%" 
                    height="150" 
                    style="border:0; border-radius: 8px;" 
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
            <p style="margin-top: 10px; font-size: 0.9em;">
                <a href="https://maps.google.com/?cid=877631985228870761&g_mp=CiVnb29nbGUubWFwcy5wbGFjZXMudjEuUGxhY2VzLkdldFBsYWNl" target="_blank" style="color: var(--sky);">View Larger Map</a>
            </p>
            <p style="margin-top: 10px;">
                <a href="#" style="color: var(--sky);"><i class="fas fa-download"></i> Download Brochure</a>
            </p>
            <p>
                <a href="#" style="color: var(--sky);"><i class="fas fa-calendar-alt"></i> Academic Calendar</a>
            </p>
        </div>
    </div>
    
    <div class="footer-bottom">
        <a href="#">Privacy Policy</a> | 
        <a href="#">Terms & Conditions</a> | 
        <a href="#">Sitemap</a> | 
        <a href="#">Careers</a>
        <p style="margin-top: 10px;"> 2025 Everest Public School. All Rights Reserved.</p>
        <p style="color: #69b4ff; font-weight: 500; margin-top: 5px;">Created by Aashik gamer</p>
    </div>
</footer>
</div> <!-- End mobile-scale-container -->

<!-- ADMIN LINK -->
<a href="admin.html" class="admin-link" target="_blank">
    <i class="fas fa-user-shield"></i> Admin Panel
</a>

<!-- TRANSLATOR COMPONENTS -->
<button id="translatorBtn" title="Translate Website (Ctrl+T)"></button>

<div id="languagePopup">
    <div class="popup-header">
        <h4>Select Language</h4>
        <button class="close-popup">&times;</button>
    </div>
    <div class="language-options">
        <div class="language-option selected" data-lang="en">
            <div class="language-flag"></div>
            <div class="language-info">
                <div class="language-name">English</div>
                <div class="language-native">English</div>
            </div>
            <div class="language-check"><i class="fas fa-check"></i></div>
        </div>
        <div class="language-option" data-lang="ne">
            <div class="language-flag"></div>
            <div class="language-info">
                <div class="language-name">Nepali</div>
                <div class="language-native"></div>
            </div>
            <div class="language-check"><i class="fas fa-check"></i></div>
        </div>
        <div class="language-option" data-lang="hi">
            <div class="language-flag"></div>
            <div class="language-info">
                <div class="language-name">Hindi</div>
                <div class="language-native"></div>
            </div>
            <div class="language-check"><i class="fas fa-check"></i></div>
        </div>
    </div>
    <button class="translate-btn">
        <i class="fas fa-language"></i> Apply Translation
    </button>
    <div class="keyboard-shortcut">
        Press <span class="shortcut-key">Ctrl + T</span> to quickly open translator
    </div>
</div>

<div id="translationNotification">
    <div class="notification-icon"></div>
    <div class="notification-content">
        <h5>Language Updated!</h5>
        <p>Website translated to <span id="notificationLang">English</span></p>
    </div>
    <button class="close-notification">&times;</button>
</div>

<div id="currentLanguage">
    <i class="fas fa-globe"></i>
    <span>Current: <strong>English</strong></span>
</div>

<div id="scrollTopBtn"><i class="fas fa-chevron-up"></i></div>

<!-- LIGHTBOX CONTAINER -->
<div id="lightbox">
    <span class="close-lightbox">&times;</span>
    <div class="lightbox-nav">
        <button class="lightbox-nav-btn prev-lightbox"><i class="fas fa-chevron-left"></i></button>
        <button class="lightbox-nav-btn next-lightbox"><i class="fas fa-chevron-right"></i></button>
    </div>
    <div class="lightbox-content">
        <img id="lightbox-img" src="" alt="Enlarged Image">
    </div>
    <div class="lightbox-counter">
        <span id="lightbox-counter">1 / 1</span>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    // ================== FIREBASE CONFIGURATION ==================
    const firebaseConfig = {
        apiKey: "AIzaSyCrjNBk9v3s_IGG-R9gZBWqLm9qJUbfjE4",
        authDomain: "everest-public-school.firebaseapp.com",
        databaseURL: "https://everest-public-school-default-rtdb.firebaseio.com",
        projectId: "everest-public-school",
        storageBucket: "everest-public-school.firebasestorage.app",
        messagingSenderId: "598969496568",
        appId: "1:598969496568:web:7c694d9d3153f8f07e9c0d"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ================== MOBILE RESPONSIVENESS FIX ==================
    function fixMobileViewport() {
        const isMobile = /iPhone|iPad|iPod|Android|webOS|BlackBerry|Windows Phone/i.test(navigator.userAgent);
        
        if (isMobile) {
            document.getElementById('desktopNotice').style.display = 'block';
            
            // Set proper viewport for mobile
            const viewport = document.querySelector('meta[name="viewport"]');
            viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
            
            // Ensure body doesn't overflow
            document.body.style.overflowX = 'hidden';
            document.body.style.width = '100%';
            
            // Remove any scaling transformations
            const container = document.querySelector('.mobile-scale-container');
            if (container) {
                container.style.transform = 'none';
                container.style.width = '100%';
                container.style.maxWidth = '100%';
            }
        }
    }

    // ================== WELCOME LIGHTBOX FUNCTIONS ==================
    function initWelcomeLightbox() {
        const welcomeLightbox = document.getElementById('welcomeLightbox');
        const closeWelcomeBtn = document.getElementById('closeWelcomeBtn');
        
        if (welcomeLightbox) {
            welcomeLightbox.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            if (closeWelcomeBtn) {
                closeWelcomeBtn.addEventListener('click', function() {
                    welcomeLightbox.style.display = 'none';
                    document.body.style.overflow = 'auto';
                });
            }
            
            welcomeLightbox.addEventListener('click', function(e) {
                if (e.target === welcomeLightbox) {
                    welcomeLightbox.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            });
            
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && welcomeLightbox.style.display === 'flex') {
                    welcomeLightbox.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            });
            
            setTimeout(function() {
                if (welcomeLightbox.style.display === 'flex') {
                    welcomeLightbox.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            }, 10000);
        }
    }

    // ================== TRANSLATION SYSTEM FUNCTIONS ==================
    const translations = {
        en: {
            "Everest Public School": "Everest Public School",
            "Bardibas-1, Mahottari": "Bardibas-1, Mahottari",
            "Home": "Home", "Admissions": "Admissions", "About Us": "About Us",
            "Events": "Events", "Leadership": "Leadership", "Gallery": "Gallery",
            "Toppers": "Toppers", "APPLY NOW": "APPLY NOW",
            "Admissions Open 2025": "Admissions Open 2025",
            "Academic & Event Calendar": "Academic & Event Calendar",
            "Search events...": "Search events...",
            "Welcome to our website": "Welcome to our website",
            "District Toppers": "District Toppers",
            "Leadership Team": "Leadership Team",
            "School Gallery": "School Gallery",
            "Student Performance Analytics (1994-2026)": "Student Performance Analytics (1994-2026)",
            "About Everest Public School": "About Everest Public School",
            "Students": "Students",
            "Teachers": "Teachers",
            "Success Rate": "Success Rate",
            "Years of Excellence": "Years of Excellence"
        },
        ne: {
            "Everest Public School": "  ",
            "Bardibas-1, Mahottari": "-, ",
            "Home": "", "Admissions": "", "About Us": " ",
            "Events": "", "Leadership": "", "Gallery": "",
            "Toppers": "", "APPLY NOW": "  ",
            "Admissions Open 2025": "    ",
            "Academic & Event Calendar": "   ",
            "Search events...": " ...",
            "Welcome to our website": "   ",
            "District Toppers": " ",
            "Leadership Team": " ",
            "School Gallery": " ",
            "Student Performance Analytics (1994-2026)": "   (-)",
            "About Everest Public School": "   ",
            "Students": "",
            "Teachers": "",
            "Success Rate": " ",
            "Years of Excellence": " "
        },
        hi: {
            "Everest Public School": "  ",
            "Bardibas-1, Mahottari": "-1, ",
            "Home": "", "Admissions": "", "About Us": "  ",
            "Events": "", "Leadership": "", "Gallery": "",
            "Toppers": "", "APPLY NOW": "  ",
            "Admissions Open 2025": "    ",
            "Academic & Event Calendar": "   ",
            "Search events...": " ...",
            "Welcome to our website": "     ",
            "District Toppers": " ",
            "Leadership Team": " ",
            "School Gallery": " ",
            "Student Performance Analytics (1994-2026)": "   (-)",
            "About Everest Public School": "     ",
            "Students": "",
            "Teachers": "",
            "Success Rate": " ",
            "Years of Excellence": "  "
        }
    };

    let currentLang = 'en';
    let selectedLang = 'en';

    function initTranslationSystem() {
        const savedLang = localStorage.getItem('schoolLang');
        if (savedLang && translations[savedLang]) {
            currentLang = savedLang;
            selectedLang = savedLang;
            applyTranslation(savedLang);
        }
        
        updateLanguageUI();
        document.getElementById('translatorBtn').addEventListener('click', toggleLanguagePopup);
        
        document.querySelectorAll('.language-option').forEach(option => {
            option.addEventListener('click', function() { selectLanguage(this.dataset.lang); });
        });
        
        document.querySelector('.translate-btn').addEventListener('click', function() {
            applyTranslation(selectedLang);
            hideLanguagePopup();
            showNotification(selectedLang);
        });
        
        document.querySelector('.close-popup').addEventListener('click', hideLanguagePopup);
        document.querySelector('.close-notification').addEventListener('click', hideNotification);
        
        document.addEventListener('keydown', function(e) {
            if ((e.ctrlKey || e.metaKey) && e.key === 't') {
                e.preventDefault();
                toggleLanguagePopup();
            }
        });
        
        document.addEventListener('click', function(e) {
            const popup = document.getElementById('languagePopup');
            const btn = document.getElementById('translatorBtn');
            if (!popup.contains(e.target) && !btn.contains(e.target) && popup.classList.contains('show')) {
                hideLanguagePopup();
            }
        });
    }

    function toggleLanguagePopup() {
        const popup = document.getElementById('languagePopup');
        popup.classList.toggle('show');
    }

    function hideLanguagePopup() {
        document.getElementById('languagePopup').classList.remove('show');
    }

    function selectLanguage(lang) {
        selectedLang = lang;
        document.querySelectorAll('.language-option').forEach(option => {
            option.classList.remove('selected');
            if (option.dataset.lang === lang) option.classList.add('selected');
        });
    }

    function applyTranslation(lang) {
        if (lang === currentLang) return;
        document.documentElement.lang = lang;
        translateElements(lang);
        localStorage.setItem('schoolLang', lang);
        currentLang = lang;
        updateCurrentLanguageDisplay();
    }

    function translateElements(lang) {
        const translation = translations[lang];
        document.querySelectorAll('h1, h2, h3, h4, h5, h6, p, span, a, button, label, li, input[placeholder], textarea[placeholder]').forEach(element => {
            const originalText = element.textContent.trim();
            const placeholder = element.getAttribute('placeholder');
            
            if (originalText && translation[originalText]) {
                element.textContent = translation[originalText];
            }
            
            if (placeholder && translation[placeholder]) {
                element.setAttribute('placeholder', translation[placeholder]);
            }
        });
        
        const langNames = { en: 'English', ne: 'Nepali', hi: 'Hindi' };
        document.getElementById('notificationLang').textContent = langNames[lang];
    }

    function showNotification(lang) {
        const notification = document.getElementById('translationNotification');
        const langNames = { en: 'English', ne: 'Nepali', hi: 'Hindi' };
        document.getElementById('notificationLang').textContent = langNames[lang];
        
        notification.style.display = 'flex';
        setTimeout(() => { notification.style.display = 'none'; }, 3000);
    }

    function hideNotification() {
        document.getElementById('translationNotification').style.display = 'none';
    }

    function updateCurrentLanguageDisplay() {
        const langNames = { en: 'English', ne: 'Nepali', hi: 'Hindi' };
        document.querySelector('#currentLanguage strong').textContent = langNames[currentLang];
    }

    function updateLanguageUI() {
        updateCurrentLanguageDisplay();
        selectLanguage(currentLang);
    }

    // ================== GALLERY DATA & FUNCTIONS ==================
    const galleryData = [
        { src: "1766673231844.jpg", tag: "extracurricular" },
        { src: "593246838_122194746770331991_48184727456840439_n.jpg", tag: "picnic" }, 
        { src: "595212006_818687434330015_8389595694705592055_n.jpg", tag: "extracurricular" },
        { src: "593787729_122194745768331991_5845623079910999971_n.jpg", tag: "picnic" },
        { src: "599964293_824632083735550_24521965999462668_n.jpg", tag: "picnic" },
        { src: "Gemini_Generated_Image_9ri1669ri1669ri1 (1).png", tag: "tour" },
        { src: "593454142_816105064588252_3655690953106568224_n.jpg", tag: "sports" },
        { src: "595128793_818686630996762_1145266375442900224_n.jpg", tag: "extracurricular" },
        { src: "0e0a2f6d-7ab2-44d1-92e6-81e9dd64a5f4.jpg", tag: "tour" },
        { src: "592239394_122194746230331991_3718826142968366627_n.jpg", tag: "picnic" }, 
        { src: "533485740_730015596530533_4815721697035069751_n.jpg", tag: "culture" },
        { src: "533956473_730014799863946_1032095295793244287_n.jpg", tag: "culture" },
        { src: "536287398_735960319269394_4610876973537204347_n.jpg", tag: "culture" },
        { src: "537091558_735947855937307_6860482927310291479_n.jpg", tag: "culture" },
        { src: "504455320_675623495303077_5613120604104835488_n.jpg", tag: "sports" },
        { src: "8ef71921-7691-4928-8bc4-8097d718ffbf.jpg", tag: "tour" },
        { src: "53a2ff83-5ad9-425d-af0f-7663c8439598.jpg", tag: "extracurricular" },
        { src: "504534061_675623498636410_1502912327569864704_n.jpg", tag: "sports" },
        { src: "533463507_730014633197296_1735591148592797827_n.jpg", tag: "culture" }, 
        { src: "bebcb8b1-2858-410e-a20e-ec91b5ba9bbc.jpg", tag: "tour" },
        { src: "592374327_122194746224331991_4483494112856248149_n.jpg", tag: "picnic" }, 
        { src: "500090035_663109969887763_5241363617233979604_n.jpg", tag: "extracurricular" },
        { src: "593787729_122194745768331991_5845623079910999971_n.jpg", tag: "picnic" }, 
        { src: "c953e2fd-5e09-4721-809b-053e75f1f2f9.jpg", tag: "tour" },
        { src: "600323024_826084186923673_314829544975664863_n.jpg", tag: "extracurricular" },
        { src: "592870553_816105084588250_3639647847805237916_n (1).jpg", tag: "sports" },
        { src: "600277172_826084013590357_7077883673768238120_n.jpg", tag: "sports" },
        { src: "491972020_641072942091466_8285571249992126096_n.jpg", tag: "extracurricular" },
        { src: "576925582_3772836163020402_5771400321286806925_n.jpg", tag: "tour" },
        { src: "592870553_816105084588250_3639647847805237916_n.jpg", tag: "sports" },
        { src: "1041e891-158d-4a1a-9f93-82dfad8de0ab.jpg", tag: "extracurricular" },
        { src: "600252794_826081780257247_8416437049697750734_n.jpg", tag: "sports" },
        { src: "595307214_122270394560210070_807986700936026793_n.jpg", tag: "tour" },
        { src: "533024266_730015139863912_2867167916007663534_n.jpg", tag: "culture" }, 
        { src: "600446727_826083446923747_1948312711537458648_n.jpg", tag: "sports" },
        { src: "3105db66-f1c9-452e-b19c-26954b5a7c27.jpg", tag: "extracurricular" },
        { src: "1766672318161.jpg", tag: "extracurricular" }, 
        { src: "579306004_3772836079687077_5635321653333577098_n.jpg", tag: "tour" },
        { src: "1766672756560.jpg", tag: "extracurricular" }, 
        { src: "600895932_826083880257037_4998328326273308303_n.jpg", tag: "sports" },
        { src: "1766672768343.jpg", tag: "extracurricular" },
        { src: "1766673016637.jpg", tag: "tour" },
        { src: "1766672789024.jpg", tag: "tour" },
        { src: "453e401f-59d5-4f5a-8abd-1c44b3f237b5.jpg", tag: "tour" },
        { src: "principal_image.jpg", tag: "tour" },
        { src: "493537597_3602052340098786_781301989243123604_n.jpg", tag: "tour" }
    ];

    const GALLERY_ITEMS_PER_PAGE = 9;
    let currentGalleryPage = 1;
    let currentGalleryFilter = 'all';
    let displayedImages = [];
    
    function renderGallery(filter = 'all', page = 1) {
        const galleryGrid = document.getElementById('galleryGrid');
        const loadMoreBtn = document.getElementById('loadMoreBtn');
        
        const filteredImages = galleryData.filter(item => filter === 'all' || item.tag === filter);
        const totalImages = filteredImages.length;
        const startIndex = (page - 1) * GALLERY_ITEMS_PER_PAGE;
        const endIndex = startIndex + GALLERY_ITEMS_PER_PAGE;
        const imagesToShow = filteredImages.slice(startIndex, endIndex);
        
        if (page === 1) {
            galleryGrid.innerHTML = '';
            displayedImages = [];
        }
        
        imagesToShow.forEach((item, index) => {
            const globalIndex = displayedImages.length;
            const div = document.createElement('div');
            div.className = 'gallery-item';
            div.setAttribute('data-tag', item.tag);
            div.style.setProperty('--i', globalIndex);
            div.innerHTML = `<img src="${item.src}" alt="Gallery Image" class="gallery-img" loading="lazy">`;
            galleryGrid.appendChild(div);
            displayedImages.push(item);
        });
        
        const totalPages = Math.ceil(totalImages / GALLERY_ITEMS_PER_PAGE);
        
        if (totalImages <= GALLERY_ITEMS_PER_PAGE || page >= totalPages) {
            loadMoreBtn.style.display = 'none';
        } else {
            loadMoreBtn.style.display = 'block';
            loadMoreBtn.textContent = 'View More Images';
            loadMoreBtn.className = 'gallery-btn view-more';
        }
        
        if (page >= totalPages && page > 1) {
            loadMoreBtn.style.display = 'block';
            loadMoreBtn.textContent = 'View Less Images';
            loadMoreBtn.className = 'gallery-btn view-less';
        }
        
        setupLightbox();
        if (currentLang !== 'en') translateElements(currentLang);
    }

    function loadMoreImages() {
        const filteredImages = galleryData.filter(item => currentGalleryFilter === 'all' || item.tag === currentGalleryFilter);
        const totalPages = Math.ceil(filteredImages.length / GALLERY_ITEMS_PER_PAGE);
        
        if (currentGalleryPage < totalPages) {
            currentGalleryPage++;
            renderGallery(currentGalleryFilter, currentGalleryPage);
        } else if (currentGalleryPage === totalPages) {
            currentGalleryPage = 1;
            renderGallery(currentGalleryFilter, currentGalleryPage);
        }
    }

    function filterGallery(filter = 'all') {
        currentGalleryFilter = filter;
        currentGalleryPage = 1;
        renderGallery(filter, 1);
        document.querySelectorAll('.gallery-tab').forEach(t => t.classList.remove('active'));
        document.querySelector(`.gallery-tab[data-filter="${filter}"]`).classList.add('active');
    }

    // ================== LIGHTBOX FUNCTIONS ==================
    let currentLightboxIndex = 0;
    let currentLightboxImages = [];

    function setupLightbox() {
        document.querySelectorAll('.gallery-img').forEach((img, index) => {
            img.addEventListener('click', function() { openLightbox(this.src, index); });
        });
        
        document.querySelectorAll('.seq-slider img, .staff-card img').forEach((img, index) => {
            img.addEventListener('click', function() { openLightbox(this.src, index); });
        });
    }

    function openLightbox(imgSrc, index) {
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');
        
        currentLightboxImages = Array.from(document.querySelectorAll('.gallery-img, .seq-slider img, .staff-card img')).map(img => img.src);
        currentLightboxIndex = currentLightboxImages.indexOf(imgSrc);
        
        if (currentLightboxIndex === -1) currentLightboxIndex = index;
        
        lightboxImg.src = imgSrc;
        updateLightboxCounter();
        lightbox.style.display = 'flex';
        document.body.style.overflow = 'hidden';
        document.addEventListener('keydown', handleLightboxKeyboard);
    }

    function updateLightboxCounter() {
        const counter = document.getElementById('lightbox-counter');
        counter.textContent = `${currentLightboxIndex + 1} / ${currentLightboxImages.length}`;
    }

    function closeLightbox() {
        const lightbox = document.getElementById('lightbox');
        lightbox.style.display = 'none';
        document.body.style.overflow = 'auto';
        document.removeEventListener('keydown', handleLightboxKeyboard);
    }

    function navigateLightbox(direction) {
        if (direction === 'next') {
            currentLightboxIndex = (currentLightboxIndex + 1) % currentLightboxImages.length;
        } else {
            currentLightboxIndex = (currentLightboxIndex - 1 + currentLightboxImages.length) % currentLightboxImages.length;
        }
        
        const lightboxImg = document.getElementById('lightbox-img');
        lightboxImg.src = currentLightboxImages[currentLightboxIndex];
        updateLightboxCounter();
    }

    function handleLightboxKeyboard(e) {
        if (e.key === 'Escape') closeLightbox();
        else if (e.key === 'ArrowRight') navigateLightbox('next');
        else if (e.key === 'ArrowLeft') navigateLightbox('prev');
    }

    // ================== ADMISSION FORM FUNCTIONS ==================
    function toggleAdmissionForm() {
        const wrapper = document.getElementById('admissionFormWrapper');
        const applyBtn = document.getElementById('openAdmissionFormBtn');
        
        if (wrapper.classList.contains('open')) {
            wrapper.classList.remove('open');
            setTimeout(() => {
                wrapper.style.display = 'none';
                applyBtn.style.display = 'inline-block';
                applyBtn.classList.add('apply-btn-animated');
            }, 800);
        } else {
            applyBtn.style.display = 'none';
            wrapper.style.display = 'block';
            setTimeout(() => wrapper.classList.add('open'), 10);
        }
    }

    function updateFileName(input) {
        const display = document.getElementById('fileNameDisplay');
        if (input.files.length > 0) {
            display.innerText = "Selected: " + input.files[0].name;
            display.style.color = "#2b4e6b";
            display.style.fontWeight = "bold";
        }
    }

    // ================== EVENT FUNCTIONS ==================
    function loadEventsFromFirebase() {
        const eventCardGrid = document.getElementById('eventCardGrid');
        eventCardGrid.innerHTML = `
            <div class="text-center py-5">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading events...</span>
                </div>
                <p class="mt-2">Loading events...</p>
            </div>
        `;
        
        db.ref('school_events').orderByChild('date').once('value').then(snapshot => {
            if (snapshot.exists()) {
                const events = snapshot.val();
                const currentDate = new Date().toISOString().split('T')[0];
                
                eventCardGrid.innerHTML = '';
                
                Object.keys(events).forEach(key => {
                    const event = events[key];
                    
                    if (event.isActive === true) {
                        const eventDate = new Date(event.date);
                        const formattedDate = eventDate.toLocaleDateString('en-US', { 
                            month: 'short', 
                            day: 'numeric' 
                        });
                        
                        const eventDiv = document.createElement('div');
                        eventDiv.className = 'event-item';
                        eventDiv.setAttribute('data-name', event.title.toLowerCase());
                        eventDiv.setAttribute('data-month', formattedDate.split(' ')[0]);
                        
                        eventDiv.innerHTML = `
                            <div class="event-date">${formattedDate.split(' ')[0]}<br><span>${formattedDate.split(' ')[1]}</span></div>
                            <div class="event-info">
                                <strong>${event.title}</strong>
                                <p>${event.description || 'No description available'}</p>
                                ${event.time ? `<small><i class="fas fa-clock"></i> ${event.time}</small>` : ''}
                                ${event.location ? `<small><i class="fas fa-map-marker-alt"></i> ${event.location}</small>` : ''}
                            </div>
                        `;
                        
                        eventCardGrid.appendChild(eventDiv);
                    }
                });
                
                if (eventCardGrid.children.length === 0) {
                    eventCardGrid.innerHTML = `
                        <div class="col-12 text-center py-5">
                            <i class="fas fa-calendar-times fa-3x text-muted mb-3"></i>
                            <h5>No Upcoming Events</h5>
                            <p class="text-muted">Check back later for upcoming school events.</p>
                        </div>
                    `;
                }
            } else {
                eventCardGrid.innerHTML = `
                    <div class="col-12 text-center py-5">
                        <i class="fas fa-calendar-plus fa-3x text-muted mb-3"></i>
                        <h5>No Events Scheduled</h5>
                        <p class="text-muted">School events will be posted here soon.</p>
                    </div>
                `;
            }
        }).catch(error => {
            console.error('Error loading events:', error);
            eventCardGrid.innerHTML = `
                <div class="col-12 text-center py-5">
                    <i class="fas fa-exclamation-triangle fa-3x text-danger mb-3"></i>
                    <h5>Error Loading Events</h5>
                    <p class="text-muted">Unable to load events at the moment.</p>
                </div>
            `;
        });
    }

    function filterEvents() {
        const searchInput = document.getElementById('eventSearch').value.toLowerCase();
        const eventItems = document.querySelectorAll('#eventCardGrid .event-item');
        
        let visibleCount = 0;
        eventItems.forEach(item => {
            const eventName = item.getAttribute('data-name').toLowerCase();
            const eventMonth = item.getAttribute('data-month').toLowerCase();
            
            if (eventName.includes(searchInput) || eventMonth.includes(searchInput)) {
                item.style.display = 'flex';
                visibleCount++;
            } else {
                item.style.display = 'none';
            }
        });
        
        if (visibleCount === 0 && searchInput) {
            const eventCardGrid = document.getElementById('eventCardGrid');
            const noResultsDiv = document.createElement('div');
            noResultsDiv.className = 'col-12 text-center py-5';
            noResultsDiv.innerHTML = `
                <i class="fas fa-search fa-3x text-muted mb-3"></i>
                <h5>No Events Found</h5>
                <p class="text-muted">No events match your search for "${searchInput}".</p>
            `;
            
            if (!document.querySelector('.no-events-message')) {
                noResultsDiv.classList.add('no-events-message');
                eventCardGrid.appendChild(noResultsDiv);
            }
        } else {
            const noResultsMsg = document.querySelector('.no-events-message');
            if (noResultsMsg) {
                noResultsMsg.remove();
            }
        }
    }

    // ================== SLIDER FUNCTIONS ==================
    function setupSliders() {
        document.querySelectorAll('.seq-slider').forEach(slider => {
            let activeIndex = 0;
            const images = slider.querySelectorAll('img');
            const prevBtn = slider.querySelector('.prev');
            const nextBtn = slider.querySelector('.next');
            
            function showImage(index) {
                images.forEach(img => img.classList.remove('active'));
                images[index].classList.add('active');
            }

            function nextImage() {
                activeIndex = (activeIndex + 1) % images.length;
                showImage(activeIndex);
            }

            function prevImage() {
                activeIndex = (activeIndex - 1 + images.length) % images.length;
                showImage(activeIndex);
            }

            if (nextBtn) nextBtn.addEventListener('click', nextImage);
            if (prevBtn) prevBtn.addEventListener('click', prevImage);
            
            setInterval(nextImage, 6000); 
            showImage(0);
        });
    }

    // ================== CHART FUNCTIONS ==================
    let chartInstance = null;
    const years = Array.from({length: 33}, (_, i) => 1994 + i);
    const nepaliYears = Array.from({length: 33}, (_, i) => 2051 + i);
    
    const performanceData = {
        labels: years,
        datasets: [{
            label: 'excerent Score (98%)',
            data: years.map(() => Math.floor(Math.random() * 15) + 85),
            backgroundColor: 'rgba(74, 144, 226, 0.7)',
            borderColor: 'rgba(74, 144, 226, 1)',
            borderWidth: 2,
            tension: 0.4
        }]
    };

    function createChart(type = 'bar') {
        const ctx = document.getElementById('performanceChart').getContext('2d');
        if (chartInstance) chartInstance.destroy();
        
        let config = {
            data: performanceData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                animation: { duration: 1000, easing: 'easeOutQuart' },
                plugins: {
                    legend: { display: true, position: 'top', labels: { color: '#2B4E6B', font: { size: 14, family: "'Segoe UI', sans-serif" } } },
                    tooltip: {
                        backgroundColor: 'rgba(43, 78, 107, 0.9)',
                        titleColor: 'white',
                        bodyColor: 'white',
                        cornerRadius: 10,
                        callbacks: { title: function(tooltipItems) {
                            const index = tooltipItems[0].dataIndex;
                            return `Year: ${years[index]} (Nepali: ${nepaliYears[index]})`;
                        }}
                    }
                }
            }
        };

        config.type = type;
        
        if (type !== 'pie' && type !== 'radar') {
            config.options.scales = {
                y: {
                    beginAtZero: true,
                    max: 100,
                    grid: { color: 'rgba(0,0,0,0.05)' },
                    ticks: { color: '#2B4E6B', callback: function(value) { return value + '%'; } }
                },
                x: {
                    grid: { color: 'rgba(0,0,0,0.05)' },
                    ticks: { color: '#2B4E6B', maxTicksLimit: 10 }
                }
            };
        }
        
        chartInstance = new Chart(ctx, config);
    }

    function initChart() { createChart('bar'); }

    // ================== COUNTER ANIMATION FUNCTIONS ==================
    function animateCounters() {
        const counters = document.querySelectorAll('.counter-item h4');
        const section = document.querySelector('.counter-section');
        let animationStarted = false;

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !animationStarted) {
                    animationStarted = true;
                    counters.forEach(counter => {
                        const target = +counter.getAttribute('data-target');
                        const isPercentage = counter.textContent.includes('%');
                        let count = 0;
                        const updateCount = () => {
                            const increment = target / 200; 
                            if (count < target) {
                                count += increment;
                                counter.innerText = Math.ceil(count) + (isPercentage ? '%' : '+');
                                requestAnimationFrame(updateCount);
                            } else {
                                counter.innerText = target + (isPercentage ? '%' : '+');
                            }
                        };
                        updateCount();
                        counter.parentElement.classList.add('visible');
                    });
                }
            });
        }, { threshold: 0.5 });

        if (section) observer.observe(section);
    }

    // ================== SCROLL ANIMATION FUNCTIONS ==================
    function setupScrollAnimations() {
        const sections = document.querySelectorAll('.section-hidden');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('section-visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1, rootMargin: '0px 0px -30px 0px' });
        
        sections.forEach(section => observer.observe(section));
    }

    // ================== FORM SUBMISSION FUNCTIONS ==================
    async function resizeImage(file) {
        return new Promise((resolve) => {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = (e) => {
                const img = new Image();
                img.src = e.target.result;
                img.onload = () => {
                    const targetWidth = 1200; 
                    const targetHeight = img.height * (targetWidth / img.width);
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    canvas.width = targetWidth;
                    canvas.height = targetHeight;
                    ctx.imageSmoothingEnabled = true;
                    ctx.imageSmoothingQuality = 'high';
                    ctx.drawImage(img, 0, 0, targetWidth, targetHeight);
                    resolve(canvas.toDataURL('image/jpeg', 1.0)); 
                };
            };
        });
    }

    // ================== SCROLL TO TOP FUNCTION ==================
    function initScrollToTop() {
        const scrollTopBtn = document.getElementById('scrollTopBtn');
        window.onscroll = function() {
            if (document.body.scrollTop > 400 || document.documentElement.scrollTop > 400) {
                scrollTopBtn.style.display = "flex";
            } else {
                scrollTopBtn.style.display = "none";
            }
        };

        scrollTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    }

    // ================== MAIN INITIALIZATION ==================
    document.addEventListener('DOMContentLoaded', function() {
        // 1. Fix mobile viewport
        fixMobileViewport();
        
        // 2. Initialize welcome lightbox
        initWelcomeLightbox();
        
        // 3. Initialize translation system
        initTranslationSystem();
        
        // 4. Render initial gallery
        renderGallery('all', 1);
        
        // 5. Load events from Firebase
        loadEventsFromFirebase();
        
        // 6. Setup scroll animations
        setupScrollAnimations();
        
        // 7. Setup sliders
        setupSliders();
        
        // 8. Initialize chart
        initChart();
        
        // 9. Animate counters
        animateCounters();
        
        // 10. Initialize scroll to top
        initScrollToTop();
        
        // 11. Setup lightbox event listeners
        document.querySelector('.close-lightbox').addEventListener('click', closeLightbox);
        document.querySelector('.prev-lightbox').addEventListener('click', () => navigateLightbox('prev'));
        document.querySelector('.next-lightbox').addEventListener('click', () => navigateLightbox('next'));
        document.getElementById('lightbox').addEventListener('click', function(e) {
            if (e.target === this) closeLightbox();
        });
        
        // 12. Gallery tab functionality
        document.querySelectorAll('.gallery-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                filterGallery(this.getAttribute('data-filter'));
            });
        });
        
        // 13. Load more images button
        document.getElementById('loadMoreBtn').addEventListener('click', loadMoreImages);
        
        // 14. Admission form button
        document.getElementById('openAdmissionFormBtn').addEventListener('click', function(e) {
            e.preventDefault();
            toggleAdmissionForm();
        });
        
        // 15. Chart controls
        document.querySelectorAll('.chart-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.chart-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                createChart(this.dataset.chart);
            });
        });
        
        // 16. Form submission
        document.getElementById('enrollmentForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const submitBtn = document.getElementById('submitBtn');
            const responseMsg = document.getElementById('responseMessage');
            
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm"></span> Processing...';

            try {
                const photoFile = document.getElementById('studentPhoto').files[0];
                let photoBase64 = "";

                if (photoFile) {
                    photoBase64 = await resizeImage(photoFile);
                }

                const data = {
                    studentName: document.getElementById('studentName').value,
                    studentPhoto: photoBase64,
                    gender: document.querySelector('input[name="gender"]:checked').value,
                    parentName: document.getElementById('parentName').value,
                    parentEmail: document.getElementById('parentEmail').value,
                    phone: document.getElementById('phone').value,
                    studentClass: document.getElementById('studentClass').value,
                    message: document.getElementById('message').value,
                    timestamp: Date.now(),
                    status: 'New'
                };

                await db.ref('student_inquiries').push(data);
                
                responseMsg.className = "mt-4 text-center alert alert-success";
                responseMsg.innerText = "Success! Your application has been sent.";
                responseMsg.classList.remove('d-none');
                document.getElementById('enrollmentForm').reset();
                document.getElementById('fileNameDisplay').innerText = "Click to select student photo";
                
                showNotification('Application submitted successfully!', 'success');
                
            } catch (err) {
                responseMsg.className = "mt-4 text-center alert alert-danger";
                responseMsg.innerText = "Error: " + err.message;
                responseMsg.classList.remove('d-none');
                showNotification('Error submitting application', 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerText = "SUBMIT INQUIRY";
            }
        });
        
        // 17. Setup real-time event updates
        db.ref('school_events').on('value', function(snapshot) {
            loadEventsFromFirebase();
        });
        
        // 18. Handle window resize
        window.addEventListener('resize', function() {
            fixMobileViewport();
        });

        // Make functions available globally
        window.toggleAdmissionForm = toggleAdmissionForm;
        window.filterEvents = filterEvents;
        window.updateFileName = updateFileName;
        window.filterGallery = filterGallery;
        window.loadMoreImages = loadMoreImages;
    });

</script>

</body>
</html>
